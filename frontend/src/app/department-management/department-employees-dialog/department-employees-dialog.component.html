<div class="dialog-header">
  <h2 mat-dialog-title>
    <mat-icon>business</mat-icon>
    {{ department.name }} - Employees
  </h2>
</div>

<mat-dialog-content class="dialog-content">
  <!-- Search Section -->
  <div class="search-section">
    <form [formGroup]="searchForm" class="search-form">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search by name</mat-label>
        <input matInput formControlName="name" placeholder="Employee name" />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search by badge</mat-label>
        <input matInput formControlName="badge_number" placeholder="Badge number" />
        <mat-icon matSuffix>badge</mat-icon>
      </mat-form-field>
    </form>
  </div>

  <!-- Employees Table -->
  <div class="table-container">
    <h3 class="table-title">
      Employees ({{ filteredEmployees.length }})
    </h3>
    
    <table mat-table [dataSource]="filteredEmployees" class="employees-table" *ngIf="!isLoading">
      <!-- Badge Number Column -->
      <ng-container matColumnDef="badge_number">
        <th mat-header-cell *matHeaderCellDef>Badge #</th>
        <td mat-cell *matCellDef="let employee">
          <div class="badge-cell">
            <mat-icon class="badge-icon">badge</mat-icon>
            <span class="badge-number">{{ employee.badge_number }}</span>
          </div>
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let employee">
          <div class="name-cell">
            <mat-icon class="person-icon">person</mat-icon>
            <div class="name-info">
              <div class="full-name">{{ employee.first_name }} {{ employee.last_name }}</div>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Org Unit Column -->
      <ng-container matColumnDef="org_unit">
        <th mat-header-cell *matHeaderCellDef>Organization Unit</th>
        <td mat-cell *matCellDef="let employee">
          <div class="org-unit-cell" *ngIf="employee.org_unit">
            <mat-icon class="org-icon">account_tree</mat-icon>
            <span class="org-name">{{ employee.org_unit.name }}</span>
          </div>
          <div class="org-unit-cell" *ngIf="!employee.org_unit">
            <mat-icon class="org-icon inactive">account_tree</mat-icon>
            <span class="org-name inactive">No organization unit</span>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredEmployees.length === 0 && !isLoading">
      <mat-icon class="empty-icon">people</mat-icon>
      <h3>No employees found</h3>
      <p *ngIf="searchForm.get('name')?.value || searchForm.get('badge_number')?.value">
        Try adjusting your search criteria
      </p>
      <p *ngIf="!searchForm.get('name')?.value && !searchForm.get('badge_number')?.value">
        This department doesn't have any employees yet
      </p>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <mat-progress-spinner mode="indeterminate" diameter="60"></mat-progress-spinner>
      <p>Loading employees...</p>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions class="dialog-actions">
  <button mat-button mat-dialog-close>
    <mat-icon>close</mat-icon>
    Close
  </button>
</mat-dialog-actions>